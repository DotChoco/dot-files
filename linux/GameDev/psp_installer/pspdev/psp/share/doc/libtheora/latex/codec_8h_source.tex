\doxysection{codec.\+h}
\label{codec_8h_source}\index{codec.h@{codec.h}}
\textbf{ Go to the documentation of this file.}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/********************************************************************}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *\ THIS\ FILE\ IS\ PART\ OF\ THE\ OggTheora\ SOFTWARE\ CODEC\ SOURCE\ CODE.\ \ \ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ USE,\ DISTRIBUTION\ AND\ REPRODUCTION\ OF\ THIS\ LIBRARY\ SOURCE\ IS\ \ \ \ \ *}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ GOVERNED\ BY\ A\ BSD-\/STYLE\ SOURCE\ LICENSE\ INCLUDED\ WITH\ THIS\ SOURCE\ *}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ *\ IN\ 'COPYING'.\ PLEASE\ READ\ THESE\ TERMS\ BEFORE\ DISTRIBUTING.\ \ \ \ \ \ \ *}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ *\ THE\ Theora\ SOURCE\ CODE\ IS\ COPYRIGHT\ (C)\ 2002-\/2009\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ *\ by\ the\ Xiph.Org\ Foundation\ http://www.xiph.org/\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ *\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ ********************************************************************}}
\DoxyCodeLine{00012\ \textcolor{comment}{}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ function:}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ last\ mod:\ \$Id:\ theora.h,v\ 1.8\ 2004/03/15\ 22:17:32\ derf\ Exp\ \$}}
\DoxyCodeLine{00015\ \textcolor{comment}{}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ ********************************************************************/}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\#if\ !defined(\_O\_THEORA\_CODEC\_H\_)}}
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\#\ define\ \_O\_THEORA\_CODEC\_H\_\ (1)}}
\DoxyCodeLine{00067\ \textcolor{preprocessor}{\#\ include\ <ogg/ogg.h>}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \textcolor{preprocessor}{\#if\ defined(\_\_cplusplus)}}
\DoxyCodeLine{00070\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{00071\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00078\ \textcolor{preprocessor}{\#define\ TH\_EFAULT\ \ \ \ \ (-\/1)}}
\DoxyCodeLine{00080\ \textcolor{preprocessor}{\#define\ TH\_EINVAL\ \ \ \ \ (-\/10)}}
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\#define\ TH\_EBADHEADER\ (-\/20)}}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\#define\ TH\_ENOTFORMAT\ (-\/21)}}
\DoxyCodeLine{00086\ \textcolor{preprocessor}{\#define\ TH\_EVERSION\ \ \ (-\/22)}}
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\#define\ TH\_EIMPL\ \ \ \ \ \ (-\/23)}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\#define\ TH\_EBADPACKET\ (-\/24)}}
\DoxyCodeLine{00094\ \textcolor{preprocessor}{\#define\ TH\_DUPFRAME\ \ \ (1)}}
\DoxyCodeLine{00101\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\{}
\DoxyCodeLine{00104\ \ \ TH\_CS\_UNSPECIFIED,}
\DoxyCodeLine{00106\ \ \ TH\_CS\_ITU\_REC\_470M,}
\DoxyCodeLine{00108\ \ \ TH\_CS\_ITU\_REC\_470BG,}
\DoxyCodeLine{00110\ \ \ TH\_CS\_NSPACES}
\DoxyCodeLine{00111\ \}th\_colorspace;}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00117\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\{}
\DoxyCodeLine{00121\ \ \ TH\_PF\_420,}
\DoxyCodeLine{00123\ \ \ TH\_PF\_RSVD,}
\DoxyCodeLine{00127\ \ \ TH\_PF\_422,}
\DoxyCodeLine{00130\ \ \ TH\_PF\_444,}
\DoxyCodeLine{00132\ \ \ TH\_PF\_NFORMATS}
\DoxyCodeLine{00133\ \}th\_pixel\_fmt;}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ }
\DoxyCodeLine{00145\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}\{}
\DoxyCodeLine{00147\ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ width;}
\DoxyCodeLine{00149\ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ height;}
\DoxyCodeLine{00151\ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ stride;}
\DoxyCodeLine{00153\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *data;}
\DoxyCodeLine{00154\ \}th\_img\_plane;}
\DoxyCodeLine{00155\ }
\DoxyCodeLine{00171\ \textcolor{keyword}{typedef}\ th\_img\_plane\ th\_ycbcr\_buffer[3];}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00207\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}\{}
\DoxyCodeLine{00211\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ version\_major;}
\DoxyCodeLine{00212\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ version\_minor;}
\DoxyCodeLine{00213\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ version\_subminor;}
\DoxyCodeLine{00217\ \ \ ogg\_uint32\_t\ \ frame\_width;}
\DoxyCodeLine{00220\ \ \ ogg\_uint32\_t\ \ frame\_height;}
\DoxyCodeLine{00223\ \ \ ogg\_uint32\_t\ \ pic\_width;}
\DoxyCodeLine{00226\ \ \ ogg\_uint32\_t\ \ pic\_height;}
\DoxyCodeLine{00230\ \ \ ogg\_uint32\_t\ \ pic\_x;}
\DoxyCodeLine{00238\ \ \ ogg\_uint32\_t\ \ pic\_y;}
\DoxyCodeLine{00243\ \ \ ogg\_uint32\_t\ \ fps\_numerator;}
\DoxyCodeLine{00244\ \ \ ogg\_uint32\_t\ \ fps\_denominator;}
\DoxyCodeLine{00255\ \ \ ogg\_uint32\_t\ \ aspect\_numerator;}
\DoxyCodeLine{00256\ \ \ ogg\_uint32\_t\ \ aspect\_denominator;}
\DoxyCodeLine{00259\ \ \ th\_colorspace\ colorspace;}
\DoxyCodeLine{00261\ \ \ th\_pixel\_fmt\ \ pixel\_fmt;}
\DoxyCodeLine{00265\ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ target\_bitrate;}
\DoxyCodeLine{00271\ \ \ \textcolor{comment}{/*Currently\ this\ is\ set\ so\ that\ a\ qi\ of\ 0\ corresponds\ to\ distortions\ of\ 24}}
\DoxyCodeLine{00272\ \textcolor{comment}{\ \ \ \ \ times\ the\ JND,\ and\ each\ increase\ by\ 16\ halves\ that\ value.}}
\DoxyCodeLine{00273\ \textcolor{comment}{\ \ \ \ This\ gives\ us\ fine\ discrimination\ at\ low\ qualities,\ yet\ effective\ rate}}
\DoxyCodeLine{00274\ \textcolor{comment}{\ \ \ \ \ control\ at\ high\ qualities.}}
\DoxyCodeLine{00275\ \textcolor{comment}{\ \ \ \ The\ qi\ value\ 63\ is\ special,\ however.}}
\DoxyCodeLine{00276\ \textcolor{comment}{\ \ \ \ For\ this,\ the\ highest\ quality,\ we\ use\ one\ half\ of\ a\ JND\ for\ our\ threshold.}}
\DoxyCodeLine{00277\ \textcolor{comment}{\ \ \ \ Due\ to\ the\ lower\ bounds\ placed\ on\ allowable\ quantizers\ in\ Theora,\ we\ will}}
\DoxyCodeLine{00278\ \textcolor{comment}{\ \ \ \ \ not\ actually\ be\ able\ to\ achieve\ quality\ this\ good,\ but\ this\ should}}
\DoxyCodeLine{00279\ \textcolor{comment}{\ \ \ \ \ provide\ as\ close\ to\ visually\ lossless\ quality\ as\ Theora\ is\ capable\ of.}}
\DoxyCodeLine{00280\ \textcolor{comment}{\ \ \ \ We\ could\ lift\ the\ quantizer\ restrictions\ without\ breaking\ VP3.1}}
\DoxyCodeLine{00281\ \textcolor{comment}{\ \ \ \ \ compatibility,\ but\ this\ would\ result\ in\ quantized\ coefficients\ that\ are}}
\DoxyCodeLine{00282\ \textcolor{comment}{\ \ \ \ \ too\ large\ for\ the\ current\ bitstream\ to\ be\ able\ to\ store.}}
\DoxyCodeLine{00283\ \textcolor{comment}{\ \ \ \ We'd\ have\ to\ redesign\ the\ token\ syntax\ to\ store\ these\ large\ coefficients,}}
\DoxyCodeLine{00284\ \textcolor{comment}{\ \ \ \ \ which\ would\ make\ transcoding\ complex.*/}}
\DoxyCodeLine{00285\ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ quality;}
\DoxyCodeLine{00299\ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ keyframe\_granule\_shift;}
\DoxyCodeLine{00300\ \}th\_info;}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00326\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }th\_comment\{}
\DoxyCodeLine{00328\ \ \ \textcolor{keywordtype}{char}\ **user\_comments;}
\DoxyCodeLine{00330\ \ \ \textcolor{keywordtype}{int}\ \ \ *comment\_lengths;}
\DoxyCodeLine{00332\ \ \ \textcolor{keywordtype}{int}\ \ \ \ comments;}
\DoxyCodeLine{00335\ \ \ \textcolor{keywordtype}{char}\ \ *vendor;}
\DoxyCodeLine{00336\ \}th\_comment;}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00341\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ th\_quant\_base[64];}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00344\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}\{}
\DoxyCodeLine{00346\ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nranges;}
\DoxyCodeLine{00349\ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ \ *sizes;}
\DoxyCodeLine{00352\ \ \ \textcolor{keyword}{const}\ th\_quant\_base\ *base\_matrices;}
\DoxyCodeLine{00353\ \}th\_quant\_ranges;}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00412\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}\{}
\DoxyCodeLine{00414\ \ \ ogg\_uint16\_t\ \ \ \ dc\_scale[64];}
\DoxyCodeLine{00416\ \ \ ogg\_uint16\_t\ \ \ \ ac\_scale[64];}
\DoxyCodeLine{00418\ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \ \ loop\_filter\_limits[64];}
\DoxyCodeLine{00420\ \ \ th\_quant\_ranges\ qi\_ranges[2][3];}
\DoxyCodeLine{00421\ \}th\_quant\_info;}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ }
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00426\ \textcolor{preprocessor}{\#define\ TH\_NHUFFMAN\_TABLES\ (80)}}
\DoxyCodeLine{00428\ \textcolor{preprocessor}{\#define\ TH\_NDCT\_TOKENS\ \ \ \ \ (32)}}
\DoxyCodeLine{00429\ }
\DoxyCodeLine{00441\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}\{}
\DoxyCodeLine{00444\ \ \ ogg\_uint32\_t\ pattern;}
\DoxyCodeLine{00447\ \ \ \textcolor{keywordtype}{int}\ \ \ \ \ \ \ \ \ \ nbits;}
\DoxyCodeLine{00448\ \}th\_huff\_code;}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00465\ \textcolor{keyword}{extern}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *th\_version\_string(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00475\ \textcolor{keyword}{extern}\ ogg\_uint32\_t\ th\_version\_number(\textcolor{keywordtype}{void});}
\DoxyCodeLine{00485\ \textcolor{keyword}{extern}\ ogg\_int64\_t\ th\_granule\_frame(\textcolor{keywordtype}{void}\ *\_encdec,ogg\_int64\_t\ \_granpos);}
\DoxyCodeLine{00497\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{double}\ th\_granule\_time(\textcolor{keywordtype}{void}\ *\_encdec,ogg\_int64\_t\ \_granpos);}
\DoxyCodeLine{00507\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ th\_packet\_isheader(ogg\_packet\ *\_op);}
\DoxyCodeLine{00518\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ th\_packet\_iskeyframe(ogg\_packet\ *\_op);}
\DoxyCodeLine{00533\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ th\_info\_init(th\_info\ *\_info);}
\DoxyCodeLine{00538\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ th\_info\_clear(th\_info\ *\_info);}
\DoxyCodeLine{00539\ }
\DoxyCodeLine{00544\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ th\_comment\_init(th\_comment\ *\_tc);}
\DoxyCodeLine{00554\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ th\_comment\_add(th\_comment\ *\_tc,\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\_comment);}
\DoxyCodeLine{00565\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ th\_comment\_add\_tag(th\_comment\ *\_tc,\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\_tag,}
\DoxyCodeLine{00566\ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\_val);}
\DoxyCodeLine{00582\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{char}\ *th\_comment\_query(th\_comment\ *\_tc,\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\_tag,\textcolor{keywordtype}{int}\ \_count);}
\DoxyCodeLine{00590\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{int}\ th\_comment\_query\_count(th\_comment\ *\_tc,\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\_tag);}
\DoxyCodeLine{00596\ \textcolor{keyword}{extern}\ \textcolor{keywordtype}{void}\ th\_comment\_clear(th\_comment\ *\_tc);}
\DoxyCodeLine{00599\ }
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ \textcolor{preprocessor}{\#if\ defined(\_\_cplusplus)}}
\DoxyCodeLine{00603\ \}}
\DoxyCodeLine{00604\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00605\ }
\DoxyCodeLine{00606\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
